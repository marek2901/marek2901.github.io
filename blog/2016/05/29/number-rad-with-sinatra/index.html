
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>#RAD With Sinatra Part 1 - Ruby Mark</title>
  <meta name="author" content="Marek Dziewit">

  
  <meta name="description" content="RAD RAD - Rapid Application Development, it&rsquo;s a style of creating applications, that allows you get things done quickly,
this philosophy is &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://marek2901.github.io/blog/2016/05/29/number-rad-with-sinatra/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Ruby Mark" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  
</head>
<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Ruby Mark</a></h1>
  
    <h2>Blog about ruby and rails.</h2>
  
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="marek2901.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search my blog"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <!-- <li><a href="/blog/archives">Archives</a></li> -->
  <li><a href="/about-me">About Me</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  <header>
    
      <h1 class="entry-title">#RAD With Sinatra Part 1</h1>
    
    
      <p class="meta">
        <time class='entry-date' datetime='2016-05-29T16:25:49+02:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>4:25 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><h2>RAD</h2>

<p>RAD - Rapid Application Development, it&rsquo;s a style of creating applications, that allows you get things done quickly,
this philosophy is highly used in Rails framework.</p>

<!-- more -->


<h2>Sinatra</h2>

<p>For those of you who might not know sinatra is minimalistic ruby web framework, to run simple hello world simply install gems</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install sinatra</span></code></pre></td></tr></table></div></figure>


<p>Create file named for example <code>sinatra_hello.rb</code> with this content</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s2">&quot;sinatra&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">get</span> <span class="s1">&#39;/&#39;</span> <span class="k">do</span>
</span><span class='line'>  <span class="s2">&quot;Hello World&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>now simple command</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">ruby</span> <span class="n">sinatra_hello</span><span class="o">.</span><span class="n">rb</span>
</span></code></pre></td></tr></table></div></figure>


<p>And it&rsquo;s done!! Simple web server created!!</p>

<p>But wait, sure we can write web server one liner. But what with database connection, templating system, getting users params.
All that you have to code by yourself, which means lot of work, and many programming decisions that can make things bad!</p>

<p>So Sinatra is not RAD framework at all!!</p>

<h2>The Challenge</h2>

<p>Sinatra doesn&rsquo;t have rad features by default, but with a bit help of community we can achieve rails like development style.</p>

<p>There is tool called <a target="_blank" href="https://github.com/c7/hazel">hazel</a> that lets you help creating sinatra app quickly reallyy guickly!!</p>

<h3>Generate template</h3>

<p>Let&rsquo;s use postgresql for database engine (you can have more options like mysql,redis)
To begin simply type</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">hazel</span> <span class="n">hello_blog</span> <span class="o">-</span><span class="n">d</span> <span class="n">postgresql</span> <span class="o">--</span><span class="n">bundle</span>
</span></code></pre></td></tr></table></div></figure>


<p>run &ndash;bundle option for automatic bundle install</p>

<p>Output:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">initializers</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">lib</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">spec</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">db</span><span class="o">/</span><span class="n">migrate</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">lib</span><span class="o">/.</span><span class="n">gitkeep</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="kp">public</span><span class="o">/</span><span class="n">stylesheets</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="kp">public</span><span class="o">/</span><span class="n">stylesheets</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">css</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="kp">public</span><span class="o">/</span><span class="n">javascripts</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="kp">public</span><span class="o">/</span><span class="n">javascripts</span><span class="o">/.</span><span class="n">gitkeep</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="kp">public</span><span class="o">/</span><span class="n">images</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="kp">public</span><span class="o">/</span><span class="n">images</span><span class="o">/.</span><span class="n">gitkeep</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="kp">public</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">hazel_icon</span><span class="o">.</span><span class="n">png</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="kp">public</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">hazel_small</span><span class="o">.</span><span class="n">png</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="kp">public</span><span class="o">/</span><span class="n">favicon</span><span class="o">.</span><span class="n">ico</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">views</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">layout</span><span class="o">.</span><span class="n">erb</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">welcome</span><span class="o">.</span><span class="n">erb</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">hello_blog</span><span class="o">.</span><span class="n">rb</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">spec</span><span class="o">/</span><span class="n">hello_blog_spec</span><span class="o">.</span><span class="n">rb</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">spec</span><span class="o">/</span><span class="n">spec_helper</span><span class="o">.</span><span class="n">rb</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">config</span><span class="o">.</span><span class="n">ru</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="no">Gemfile</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="no">Rakefile</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="no">README</span><span class="o">.</span><span class="n">md</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">db</span><span class="o">.</span><span class="n">yml</span>
</span><span class='line'>  <span class="n">create</span>  <span class="n">hello_blog</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">initializers</span><span class="o">/</span><span class="n">database</span><span class="o">.</span><span class="n">rb</span>
</span><span class='line'>     <span class="n">run</span>  <span class="n">bundle</span> <span class="n">from</span> <span class="s2">&quot;./hello_blog&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>now setup your database connection:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="ss">development</span><span class="p">:</span>
</span><span class='line'> <span class="ss">adapter</span><span class="p">:</span> <span class="n">postgresql</span>
</span><span class='line'> <span class="ss">host</span><span class="p">:</span> <span class="n">localhost</span>
</span><span class='line'> <span class="ss">database</span><span class="p">:</span> <span class="n">blog</span>
</span><span class='line'> <span class="ss">user</span><span class="p">:</span> <span class="n">user</span>
</span><span class='line'> <span class="ss">password</span><span class="p">:</span> <span class="n">password</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>warning, you need to have rake commands avalible, in my case there were issue with them, rake couldn't found environment task, so I've created one:</code></p>

<p>Rakefile</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">task</span> <span class="ss">:environment</span> <span class="k">do</span>
</span><span class='line'>  <span class="nb">require</span> <span class="s2">&quot;./env_loader&quot;</span>
</span><span class='line'>  <span class="nb">require</span> <span class="s2">&quot;./hello_blog&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you see i created env_loader in main dir, it basically extracts few first lines from config.ru so i can reuse them here</p>

<p>Content of env_loader extrated from config.ru</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="vg">$LOAD_PATH</span> <span class="o">&lt;&lt;</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">__FILE__</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c1">#set default env as development can be overriden</span>
</span><span class='line'><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;RACK_ENV&#39;</span><span class="o">]</span> <span class="o">||=</span> <span class="s2">&quot;development&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">require</span> <span class="s2">&quot;bundler&quot;</span>
</span><span class='line'><span class="no">Bundler</span><span class="o">.</span><span class="n">require</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Local config</span>
</span><span class='line'><span class="nb">require</span> <span class="s2">&quot;find&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="sx">%w{config/initializers lib}</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">load_path</span><span class="o">|</span>
</span><span class='line'>  <span class="no">Find</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">load_path</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
</span><span class='line'>    <span class="nb">require</span> <span class="n">f</span> <span class="k">unless</span> <span class="n">f</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sr">/\/\..+$/</span><span class="p">)</span> <span class="o">||</span> <span class="no">File</span><span class="o">.</span><span class="n">directory?</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>modified config.ru</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Load path and gems/bundler</span>
</span><span class='line'><span class="nb">require</span> <span class="s2">&quot;./env_loader&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Load app</span>
</span><span class='line'><span class="nb">require</span> <span class="s2">&quot;hello_blog&quot;</span>
</span><span class='line'><span class="n">run</span> <span class="no">HelloBlog</span>
</span></code></pre></td></tr></table></div></figure>


<p>run</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rake</span> <span class="n">spec</span>
</span></code></pre></td></tr></table></div></figure>


<p>to check if it&rsquo;s working.</p>

<p>now there is a base setup so lets create post CRUD</p>

<ul>
<li>Create model and migration</li>
</ul>


<p>Inside lib folder create post.rb</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">Sequel</span><span class="o">::</span><span class="no">Model</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>simple Post class extending Sequel Model</p>

<p>Next inside db/migrate folder create new file:</p>

<p>db/migrate/001_create_posts.rb</p>

<p><code>remember sequel migration naming convention [nomber]_description.rb, you will get errors if you don't follow.</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Sequel</span><span class="o">.</span><span class="n">migration</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">up</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">create_table</span><span class="p">(</span><span class="ss">:posts</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">primary_key</span> <span class="ss">:id</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:text</span><span class="p">,</span> <span class="ss">:unique</span><span class="o">=&gt;</span><span class="kp">true</span>
</span><span class='line'>      <span class="n">column</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">:text</span><span class="p">,</span> <span class="ss">:unique</span><span class="o">=&gt;</span><span class="kp">true</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">down</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">drop_table</span><span class="p">(</span><span class="ss">:posts</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now simply run</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rake</span> <span class="ss">db</span><span class="p">:</span><span class="n">migrate</span>
</span></code></pre></td></tr></table></div></figure>


<p>If everything is done correctly you shouldn&rsquo;t see any message, if you do:</p>

<p>&ndash; you could forgot creteing database, simply login to your db shell and type</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">blog</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>&ndash; add <code>"postgres"</code> to Gemfile and run bundle install</p>

<ul>
<li>Create views</li>
</ul>


<p>&ndash; Index</p>

<p>create <code>views/posts.erb</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;h2&gt;</span>Posts<span class="nt">&lt;/h2&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;content&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;ul&gt;</span>
</span><span class='line'>    <span class="err">&lt;</span>% Post.all.each do |e| %&gt;
</span><span class='line'>      <span class="nt">&lt;li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;&lt;%= url &quot;</span><span class="na">posts</span><span class="err">/#{</span><span class="na">e</span><span class="err">.</span><span class="na">id</span><span class="err">}&quot;</span> <span class="err">%</span><span class="nt">&gt;</span>&quot;&gt;
</span><span class='line'>          <span class="nt">&lt;h4&gt;</span><span class="err">&lt;</span>%= e.title %&gt;<span class="nt">&lt;/h4&gt;&lt;/br&gt;&lt;/a&gt;</span>
</span><span class='line'>          <span class="nt">&lt;p&gt;</span><span class="err">&lt;</span>%= e.body.truncate(10) || &quot;N/A&quot; %&gt;<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>    <span class="err">&lt;</span>% end %&gt;
</span><span class='line'>  <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;sidebar&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h3&gt;</span>Environment<span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>  <span class="nt">&lt;ul&gt;</span>
</span><span class='line'>    <span class="nt">&lt;li&gt;&lt;b&gt;</span>Ruby:<span class="nt">&lt;/b&gt;</span> <span class="err">&lt;</span>%= RUBY_VERSION %&gt;<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>    <span class="nt">&lt;li&gt;&lt;b&gt;</span>Environment:<span class="nt">&lt;/b&gt;</span> <span class="err">&lt;</span>%= ENV[&quot;RACK_ENV&quot;] %&gt;<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>    <span class="nt">&lt;li&gt;&lt;b&gt;</span>Server:<span class="nt">&lt;/b&gt;</span> <span class="err">&lt;</span>%= @env[&quot;SERVER_SOFTWARE&quot;] %&gt;<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>    <span class="nt">&lt;li&gt;&lt;b&gt;</span>Port:<span class="nt">&lt;/b&gt;</span> <span class="err">&lt;</span>%= @env[&quot;SERVER_PORT&quot;] %&gt;<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>next add mapping in app class:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">HelloBlog</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">set</span> <span class="ss">:public_folder</span> <span class="o">=&gt;</span> <span class="s2">&quot;public&quot;</span><span class="p">,</span> <span class="ss">:static</span> <span class="o">=&gt;</span> <span class="kp">true</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">get</span> <span class="s2">&quot;/&quot;</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">erb</span> <span class="ss">:posts</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>&ndash; View single post</p>

<p>in index file there is href in title:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;&lt;%= url &quot;</span><span class="na">posts</span><span class="err">/#{</span><span class="na">e</span><span class="err">.</span><span class="na">id</span><span class="err">}&quot;</span> <span class="err">%</span><span class="nt">&gt;</span>&quot;&gt;
</span></code></pre></td></tr></table></div></figure>


<p>so we need to map /posts/:id in our app class</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">HelloBlog</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">set</span> <span class="ss">:public_folder</span> <span class="o">=&gt;</span> <span class="s2">&quot;public&quot;</span><span class="p">,</span> <span class="ss">:static</span> <span class="o">=&gt;</span> <span class="kp">true</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">get</span> <span class="s2">&quot;/&quot;</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">erb</span> <span class="ss">:posts</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">get</span> <span class="s2">&quot;/posts/:id&quot;</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">erb</span> <span class="ss">:post</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>TO BE COUNTINUED</h2>

<p>thats the first part of simple sinatra scaffold in next part we will cover creating deleting and updating our post</p>

<p>all code is avalible on <a href="https://github.com/marek2901/sinatra-scaffold-blog">github repo</a></p>
</div>
  <footer>
    <p class="meta">
      <span class="byline author vcard">Posted by <span class="fn">Marek Dziewit</span></span>
      <time class='entry-date' datetime='2016-05-29T16:25:49+02:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>4:25 pm</span></time>
      
    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://marek2901.github.io/blog/2016/05/29/number-rad-with-sinatra/" data-via="" data-counturl="http://marek2901.github.io/blog/2016/05/29/number-rad-with-sinatra/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>
    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016/03/22/number-pry-the-better-console/" title="Previous Post: #Pry - the better console">&laquo; #Pry - the better console</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/05/31/number-rad-with-sinatra-part-2/" title="Next Post: #RAD with Sinatra Part 2">#RAD with Sinatra Part 2 &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/05/31/number-rad-with-sinatra-part-2/">#RAD With Sinatra Part 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/29/number-rad-with-sinatra/">#RAD With Sinatra Part 1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/22/number-pry-the-better-console/">#Pry - the Better Console</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/18/my-rbenv-configuration/">Ruby Environment Setup With Rbenv</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/marek2901">@marek2901</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'marek2901',
            count: 10,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Marek Dziewit -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p></footer>
  <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>
</body>
</html>
